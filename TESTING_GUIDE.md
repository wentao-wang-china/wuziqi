# 🧪 赛博朋克五子棋 - 完整测试指南

**测试时间**: 2026-01-20
**服务器地址**: http://localhost:8000
**测试人员**: Claude Code

---

## 🚀 测试准备

### 1. 启动服务器

服务器已启动在 **http://localhost:8000**

访问方式：
```bash
# 在浏览器中打开
open http://localhost:8000

# 或直接访问 index.html
open http://localhost:8000/index.html
```

### 2. 打开浏览器开发者工具

**快捷键**: F12 或 Cmd+Option+I (Mac)

**需要查看的面板**:
- **Console** - 查看日志输出
- **Network** - 检查资源加载
- **Elements** - 检查DOM结构

---

## ✅ 测试清单

### 阶段 1: 页面加载测试

#### 1.1 基础加载 ⏱️
- [ ] 打开 http://localhost:8000
- [ ] 页面正常显示（无白屏）
- [ ] Console 显示初始化信息
- [ ] 网格背景动画正常

**预期 Console 输出**:
```
=== 赛博朋克五子棋 ===
游戏加载中...
[INFO] DOM元素缓存完成
[INFO] 游戏引擎初始化完成
[INFO] UI控制器初始化完成
=== 游戏准备就绪 ===
```

#### 1.2 资源加载检查
打开 **Network** 面板，刷新页面

**需要成功加载的文件**:
- [ ] index.html (200)
- [ ] css/main.css (200)
- [ ] css/cyberpunk.css (200)
- [ ] js/utils.js (200)
- [ ] js/audio.js (200)
- [ ] js/board.js (200)
- [ ] js/ai.js (200)
- [ ] js/game.js (200)
- [ ] js/ui.js (200)

**如果有404错误**: 检查文件路径是否正确

#### 1.3 视觉检查
- [ ] 页面标题显示 "CYBERPUNK GOMOKU"
- [ ] 棋盘Canvas正确渲染（15x15网格）
- [ ] 网格线呈现霓虹蓝色发光效果
- [ ] 右侧控制面板显示正常
- [ ] 难度选择模态框自动弹出

---

### 阶段 2: 难度选择测试

#### 2.1 模态框显示
- [ ] 难度选择模态框自动显示
- [ ] 模态框居中显示
- [ ] 模态框有发光边框效果
- [ ] 三个难度按钮正常显示

#### 2.2 难度选择
**测试简单难度**:
- [ ] 点击"简单"按钮
- [ ] 模态框关闭
- [ ] 棋盘激活（可以落子）
- [ ] 难度显示更新为"简单"
- [ ] Console 显示 AI 初始化信息

**预期 Console 输出**:
```
[INFO] 选择难度: {difficulty: "easy"}
[INFO] AI引擎初始化完成: {difficulty: "easy", maxDepth: 1}
[GAME] 游戏开始: {difficulty: "easy", playerSide: "black"}
```

**重复测试中等和困难难度**:
- [ ] 重新开始游戏
- [ ] 选择"中等"难度，验证初始化
- [ ] 重新开始游戏
- [ ] 选择"困难"难度，验证初始化

---

### 阶段 3: 玩家落子测试

#### 3.1 悬停预览
- [ ] 鼠标移动到棋盘空位上
- [ ] 显示半透明的预览棋子（紫色）
- [ ] 鼠标移开后预览消失
- [ ] 移动到不同位置时预览跟随

#### 3.2 落子功能
**第一步落子**:
- [ ] 点击棋盘中心附近空位
- [ ] 出现黑色棋子（紫色渐变）
- [ ] 棋子有发光效果
- [ ] 最后一手显示粉色圆圈标记
- [ ] "已下步数"更新为 1
- [ ] "当前回合"显示"白棋"

**预期 Console 输出**:
```
[GAME] 玩家落子: {row: 7, col: 7}
[INFO] 检查胜负...
[INFO] 玩家切换: black -> white
[AI] 开始AI搜索...
```

#### 3.3 连续落子
- [ ] 等待 AI 响应
- [ ] AI 落子出现（青色渐变）
- [ ] "当前回合"切换回"黑棋"
- [ ] "已下步数"正确增加
- [ ] 继续点击其他空位可以落子

#### 3.4 无效落子测试
- [ ] 尝试点击已有棋子的位置
- [ ] 不应该落子
- [ ] Console 显示警告信息

**预期 Console 输出**:
```
[WARN] 该位置已有棋子
```

---

### 阶段 4: AI 响应测试

#### 4.1 简单难度 (搜索深度1层)
- [ ] 选择简单难度开始游戏
- [ ] 玩家落子后，AI 在 0.5 秒内响应
- [ ] AI 落子位置合法（不占用已有位置）
- [ ] Console 显示搜索统计信息

**预期 Console 输出示例**:
```
[AI] 开始AI搜索: {difficulty: "easy", depth: 1}
[AI] 候选点数量: 8
[AI] AI搜索完成: {
  bestMove: {row: 6, col: 7},
  bestScore: 123,
  searchCount: 15,
  pruneCount: 3,
  searchTime: "234ms"
}
```

#### 4.2 中等难度 (搜索深度2层)
- [ ] 重新开始，选择中等难度
- [ ] AI 响应时间 < 1.5秒
- [ ] 搜索节点数明显增加
- [ ] AI 有基本进攻/防守意识

#### 4.3 困难难度 (搜索深度3层)
- [ ] 重新开始，选择困难难度
- [ ] AI 响应时间 < 3秒
- [ ] 搜索节点数进一步增加
- [ ] AI 有明显策略性

#### 4.4 必杀点检测
**测试进攻必杀**:
1. 下出己方三连（黑子）
2. 继续下第四个子
3. 观察 AI 是否会防守

**测试防守必杀**:
1. 让 AI 形成三连
2. 观察 AI 是否继续进攻完成四连

---

### 阶段 5: 五连判定测试

#### 5.1 横向五连
**步骤**:
1. 在同一行依次落子 5 个黑子
2. 中间允许 AI 落白子（但不在同一行）

**验证**:
- [ ] 第5个黑子落下后立即判定获胜
- [ ] 显示胜利模态框
- [ ] 模态框标题显示"恭喜获胜！"
- [ ] 显示总步数统计
- [ ] 播放胜利音效

**预期 Console 输出**:
```
[GAME] 五连检测成功！
[GAME] 游戏结束: {winner: "black"}
[INFO] 显示胜利模态框: {winner: "black", isPlayerWin: true}
```

#### 5.2 纵向五连
重复上述测试，但在同一列落子

#### 5.3 斜向五连 (右下)
在对角线上落5个子（从左上到右下）

#### 5.4 斜向五连 (左下)
在对角线上落5个子（从右上到左下）

#### 5.5 AI 获胜测试
- [ ] 让 AI 形成五连
- [ ] 验证判定 AI 获胜
- [ ] 模态框显示"很遗憾，你输了"

---

### 阶段 6: 悔棋功能测试

#### 6.1 基础悔棋
**步骤**:
1. 下3-4步棋（玩家和AI交替）
2. 点击"悔棋"按钮

**验证**:
- [ ] 同时撤销玩家和AI各一步
- [ ] 棋盘恢复到前一状态
- [ ] "已下步数"减少2
- [ ] "当前回合"正确显示
- [ ] Console 显示悔棋信息

**预期 Console 输出**:
```
[INFO] 执行悔棋
[GAME] 游戏悔棋
```

#### 6.2 边界测试
**少于2步时悔棋**:
- [ ] 开局后只下1步
- [ ] 点击悔棋按钮
- [ ] 不应该执行悔棋
- [ ] Console 显示警告

**预期 Console 输出**:
```
[WARN] 至少需要下2步才能悔棋
```

#### 6.3 AI思考时悔棋
- [ ] 玩家落子后立即点击悔棋
- [ ] AI 正在思考时不应允许悔棋
- [ ] Console 显示警告

---

### 阶段 7: 音效系统测试

#### 7.1 音效开关
**初始状态**:
- [ ] 音效按钮显示"🔊 音效开启"
- [ ] 点击按钮切换到"🔇 音效关闭"
- [ ] 再次点击恢复"🔊 音效开启"

#### 7.2 落子音效
- [ ] 确保音效开启
- [ ] 点击棋盘落子
- [ ] 听到落子音效（清脆的点击声）
- [ ] AI 落子时也播放音效

#### 7.3 胜利音效
- [ ] 完成五连获胜
- [ ] 听到胜利音效（欢庆声）

#### 7.4 按钮音效
- [ ] 点击"重新开始"按钮
- [ ] 听到点击音效
- [ ] 点击"悔棋"按钮
- [ ] 听到点击音效

#### 7.5 音效关闭测试
- [ ] 关闭音效
- [ ] 落子、获胜、按钮点击都不应播放音效

---

### 阶段 8: UI 交互测试

#### 8.1 重新开始
**步骤**:
1. 进行游戏若干步
2. 点击"重新开始"按钮

**验证**:
- [ ] 显示难度选择模态框
- [ ] 选择难度后棋盘清空
- [ ] 统计信息重置
- [ ] 可以重新下棋

#### 8.2 再来一局
**步骤**:
1. 完成一局游戏（获胜或失败）
2. 点击胜利模态框中的"再来一局"

**验证**:
- [ ] 胜利模态框关闭
- [ ] 棋盘清空
- [ ] 使用相同难度重新开始
- [ ] 无需重新选择难度

#### 8.3 状态显示
**验证所有状态正确更新**:
- [ ] "当前回合" 在黑棋/白棋间正确切换
- [ ] "难度" 显示当前选择的难度
- [ ] "已下步数" 实时更新
- [ ] "AI思考时间" 在AI落子后更新

#### 8.4 按钮状态
**AI 思考时**:
- [ ] "悔棋"按钮禁用（灰色）
- [ ] "重新开始"按钮可用

**游戏结束时**:
- [ ] 所有按钮保持可用
- [ ] 棋盘不再响应点击

---

## 🐛 常见问题排查

### 问题 1: 页面白屏
**可能原因**:
- JavaScript 文件加载失败
- 语法错误导致脚本中断

**排查步骤**:
1. 打开 Console 查看错误信息
2. 检查 Network 面板，确认所有 JS 文件都加载成功（200状态）
3. 查看是否有红色错误信息

### 问题 2: 难度选择模态框不显示
**可能原因**:
- CSS 未正确加载
- UI 初始化失败

**排查步骤**:
1. 检查 Console 是否有 "UI控制器初始化完成" 信息
2. 检查 Network 面板 CSS 文件是否加载
3. 在 Console 输入: `document.getElementById('difficultyModal')`
4. 查看是否返回元素

### 问题 3: 点击棋盘无反应
**可能原因**:
- 游戏未开始（未选择难度）
- AI 正在思考
- 事件绑定失败

**排查步骤**:
1. 确认已选择难度
2. 查看 Console 是否有错误
3. 在 Console 输入: `ui` （查看 UI 实例）

### 问题 4: AI 不响应
**可能原因**:
- AI 未初始化
- 算法出错

**排查步骤**:
1. 查看 Console 是否有 "[AI] 开始AI搜索" 信息
2. 检查是否有错误堆栈
3. 在 Console 输入: `game.ai` （查看 AI 实例）

### 问题 5: 音效不播放
**可能原因**:
- 浏览器自动播放限制
- 音效文件未生成

**排查步骤**:
1. 检查音效是否开启（🔊图标）
2. 打开 Console 查看是否有音效加载警告
3. 检查是否是浏览器自动播放策略限制
4. 尝试先点击页面任意位置激活音频上下文

---

## 📊 测试结果记录表

### 功能测试结果

| 测试项 | 状态 | 备注 |
|--------|------|------|
| 页面加载 | ⏳ | |
| 资源加载 | ⏳ | |
| 难度选择 | ⏳ | |
| 玩家落子 | ⏳ | |
| 悬停预览 | ⏳ | |
| AI响应 | ⏳ | |
| 简单难度 | ⏳ | |
| 中等难度 | ⏳ | |
| 困难难度 | ⏳ | |
| 横向五连 | ⏳ | |
| 纵向五连 | ⏳ | |
| 斜向五连 | ⏳ | |
| 悔棋功能 | ⏳ | |
| 落子音效 | ⏳ | |
| 胜利音效 | ⏳ | |
| 音效开关 | ⏳ | |
| 重新开始 | ⏳ | |
| 再来一局 | ⏳ | |
| 状态显示 | ⏳ | |

### 性能测试结果

| 指标 | 目标 | 实际 | 状态 |
|------|------|------|------|
| 简单难度响应 | <0.5s | ⏳ | ⏳ |
| 中等难度响应 | <1.5s | ⏳ | ⏳ |
| 困难难度响应 | <3s | ⏳ | ⏳ |
| Canvas渲染 | >30fps | ⏳ | ⏳ |

---

## ✅ 测试完成标准

所有测试项都标记为 ✅ 后，项目可以发布。

**签名**: _______________
**日期**: 2026-01-20
**测试版本**: v1.0

---

## 🚀 开始测试！

**现在请打开浏览器访问**: http://localhost:8000

按照上述测试清单逐项测试，并在测试结果记录表中标记状态。

祝测试顺利！🎮✨
